name: ğŸŒ æ”¶é›†IPåœ°å€å¹¶ä¿å­˜åˆ°æ–‡ä»¶

on:
  schedule:
    - cron: '30 * * * *'   # ä¸»è¦è°ƒåº¦ï¼šæ¯å°æ—¶çš„30åˆ†é’Ÿè¿è¡Œ
    - cron: '0 * * * *'    # å¤‡ç”¨è°ƒåº¦ï¼šæ¯å°æ—¶çš„0åˆ†é’Ÿè¿è¡Œï¼ˆæ•´ç‚¹ï¼‰
  workflow_dispatch:        # å…è®¸æ‰‹åŠ¨è§¦å‘
    inputs:
      reason:
        description: 'æ‰‹åŠ¨è§¦å‘åŸå› '
        required: false
        default: 'æ‰‹åŠ¨æ‰§è¡Œ'
  push:                    # ä»£ç æ¨é€æ—¶è§¦å‘ï¼ˆå¤‡ç”¨ï¼‰
    branches: [ main, master ]
    paths:
      - '.github/workflows/**'
      - 'autoip6.py'
      - 'scripts/**'
  pull_request:            # PRæ—¶è§¦å‘ï¼ˆæµ‹è¯•ç”¨ï¼‰
    branches: [ main, master ]
    paths:
      - '.github/workflows/**'
      - 'autoip6.py'

# ========== æƒé™é…ç½® ==========
permissions:
  contents: write    # å¿…éœ€ï¼šæäº¤ IP æ–‡ä»¶å˜æ›´
  actions: write     # å¿…éœ€ï¼šæ¸…ç†å·¥ä½œæµè®°å½•
  checks: write      # æ¨èï¼šPR æ£€æŸ¥çŠ¶æ€

env:
  PYTHON_VERSION: '3.x'
  RETAIN_DAYS: 0
  KEEP_MINIMUM_RUNS: 5

jobs:
  collect-ip-addresses:
    name: ğŸš€ æ”¶é›†IPåœ°å€
    runs-on: ubuntu-latest
    
    # ä½œä¸šçº§æƒé™ï¼ˆè¦†ç›–å…¨å±€æƒé™ï¼‰
    permissions:
      contents: write
      actions: write
      checks: write
    
    outputs:
      timestamp: ${{ steps.timestamp.outputs.time }}
      files_changed: ${{ steps.changes-check.outputs.has_changes }}
      trigger_type: ${{ steps.debug.outputs.trigger_type }}
      ip_count: ${{ steps.file-check.outputs.ip_count }}
      ipv6_count: ${{ steps.file-check.outputs.ipv6_count }}
    
    steps:
      # ========== è°ƒè¯•ä¿¡æ¯ ==========
      - name: ğŸ” è°ƒè¯•è§¦å‘ä¿¡æ¯
        id: debug
        run: |
          echo "ğŸ¯ å·¥ä½œæµè§¦å‘æ–¹å¼: ${{ github.event_name }}"
          echo "ğŸ“… å½“å‰æ—¶é—´: $(date)"
          echo "ğŸ• UTCæ—¶é—´: $(date -u)"
          echo "ğŸ” ä»“åº“: ${{ github.repository }}"
          echo "ğŸŒ¿ åˆ†æ”¯: ${{ github.ref }}"
          echo "ğŸ‘¤ è§¦å‘è€…: ${{ github.actor }}"
          echo "ğŸ·ï¸ å·¥ä½œæµ: ${{ github.workflow }}"
          echo "ğŸ†” è¿è¡ŒID: ${{ github.run_id }}"
          
          # è®¾ç½®è§¦å‘ç±»å‹è¾“å‡º
          if [ "${{ github.event_name }}" == "schedule" ]; then
            echo "â° è§¦å‘ç±»å‹: å®šæ—¶è°ƒåº¦"
            echo "trigger_type=scheduled" >> $GITHUB_OUTPUT
          elif [ "${{ github.event_name }}" == "workflow_dispatch" ]; then
            echo "ğŸ‘† è§¦å‘ç±»å‹: æ‰‹åŠ¨æ‰§è¡Œ"
            echo "ğŸ“ åŸå› : ${{ github.event.inputs.reason }}"
            echo "trigger_type=manual" >> $GITHUB_OUTPUT
          elif [ "${{ github.event_name }}" == "push" ]; then
            echo "ğŸ“¤ è§¦å‘ç±»å‹: ä»£ç æ¨é€"
            echo "trigger_type=push" >> $GITHUB_OUTPUT
          elif [ "${{ github.event_name }}" == "pull_request" ]; then
            echo "ğŸ”€ è§¦å‘ç±»å‹: æ‹‰å–è¯·æ±‚"
            echo "trigger_type=pull_request" >> $GITHUB_OUTPUT
          else
            echo "â“ è§¦å‘ç±»å‹: å…¶ä»– (${{ github.event_name }})"
            echo "trigger_type=other" >> $GITHUB_OUTPUT
          fi

      # ========== æƒé™æ£€æŸ¥ ==========
      - name: ğŸ” æ£€æŸ¥æƒé™
        run: |
          echo "ğŸ” æƒé™è°ƒè¯•ä¿¡æ¯:"
          echo "â€¢ å…¨å±€æƒé™: ${{ toJson(permissions) }}"
          echo "â€¢ è§¦å‘äº‹ä»¶: ${{ github.event_name }}"
          echo "â€¢ ä»“åº“: ${{ github.repository }}"
          echo "â€¢ æ‰§è¡Œè€…: ${{ github.actor }}"
          
          # æµ‹è¯•å†™å…¥æƒé™
          if touch test-permission.txt && echo "æƒé™æµ‹è¯•" > test-permission.txt; then
            echo "âœ… æ–‡ä»¶å†™å…¥æƒé™: æ­£å¸¸"
            rm test-permission.txt
          else
            echo "âŒ æ–‡ä»¶å†™å…¥æƒé™: å¤±è´¥"
            exit 1
          fi

      - name: ğŸ“ ç”Ÿæˆæ—¶é—´æˆ³
        id: timestamp
        run: |
          echo "time=$(date -u +'%Y-%m-%d %H:%M:%S UTC')" >> $GITHUB_OUTPUT
          echo "date=$(date -u +'%Y%m%d')" >> $GITHUB_OUTPUT
          echo "hour=$(date -u +'%H')" >> $GITHUB_OUTPUT

      # ========== æ¸…ç† ==========
      - name: ğŸ§¹ æ¸…ç†æ—§å·¥ä½œæµè¿è¡Œè®°å½•
        uses: Mattraks/delete-workflow-runs@v2
        with:
          retain_days: ${{ env.RETAIN_DAYS }}
          keep_minimum_runs: ${{ env.KEEP_MINIMUM_RUNS }}
          repository: ${{ github.repository }}
          token: ${{ secrets.GITHUB_TOKEN }}

      # ========== ä»“åº“è®¾ç½® ==========
      - name: ğŸ“¥ æ£€å‡ºä»“åº“
        uses: actions/checkout@v4
        with:
          fetch-depth: 1
          token: ${{ secrets.GITHUB_TOKEN }}
          ref: ${{ github.ref }}

      # ========== Pythonç¯å¢ƒ ==========
      - name: ğŸ è®¾ç½®Python ${{ env.PYTHON_VERSION }}
        uses: actions/setup-python@v5
        with:
          python-version: ${{ env.PYTHON_VERSION }}
          cache: 'pip'

      - name: ğŸ“¦ å®‰è£…ä¾èµ–
        run: |
          echo "ğŸ”§ å®‰è£…Pythonä¾èµ–..."
          python -m pip install --upgrade pip
          pip install requests ipaddress tqdm
          echo "âœ… ä¾èµ–å®‰è£…æˆåŠŸ"
          
          # éªŒè¯Pythonç¯å¢ƒ
          echo "ğŸ Pythonç‰ˆæœ¬: $(python --version)"
          echo "ğŸ“¦ pipç‰ˆæœ¬: $(pip --version)"

      # ========== IPåœ°å€æ”¶é›† ==========
      - name: ğŸŒ æ”¶é›†IPåœ°å€
        id: ip-collection
        run: |
          echo "ğŸ•¸ï¸ å¼€å§‹æ”¶é›†IPåœ°å€..."
          echo "ğŸ“‹ è§¦å‘ç±»å‹: ${{ steps.debug.outputs.trigger_type }}"
          echo "â° æ—¶é—´æˆ³: ${{ steps.timestamp.outputs.time }}"
          
          # åˆ›å»ºå¿…è¦çš„ç›®å½•
          mkdir -p non_us_ips
          mkdir -p logs
          
          start_time=$(date +%s)
          current_date=$(date +%Y%m%d)
          log_file="logs/ip_collection_${current_date}.log"
          
          echo "ğŸ“ å¼€å§‹æ—¶é—´: $(date)" | tee -a "$log_file"
          
          # æ‰§è¡ŒIPæ”¶é›†è„šæœ¬
          if python autoip6.py 2>&1 | tee -a "$log_file"; then
            end_time=$(date +%s)
            duration=$((end_time - start_time))
            echo "âœ… IPåœ°å€æ”¶é›†å®Œæˆ" | tee -a "$log_file"
            echo "â±ï¸ æ‰§è¡Œæ—¶é—´: ${duration} ç§’" | tee -a "$log_file"
            echo "result=success" >> $GITHUB_OUTPUT
            echo "duration=${duration}" >> $GITHUB_OUTPUT
          else
            end_time=$(date +%s)
            duration=$((end_time - start_time))
            echo "âŒ IPåœ°å€æ”¶é›†å¤±è´¥" | tee -a "$log_file"
            echo "â±ï¸ æ‰§è¡Œæ—¶é—´: ${duration} ç§’" | tee -a "$log_file"
            echo "result=failure" >> $GITHUB_OUTPUT
            echo "duration=${duration}" >> $GITHUB_OUTPUT
            exit 1
          fi

      # ========== æ–‡ä»¶éªŒè¯ ==========
      - name: ğŸ” éªŒè¯ç”Ÿæˆçš„æ–‡ä»¶
        id: file-check
        run: |
          echo "ğŸ“‹ æ£€æŸ¥ç”Ÿæˆçš„æ–‡ä»¶..."
          echo "ğŸ“ å½“å‰ç›®å½•å†…å®¹:"
          ls -la
          
          # æ£€æŸ¥IPæ–‡ä»¶
          if [ -f "ip.txt" ] && [ -s "ip.txt" ]; then
            ip_count=$(wc -l < ip.txt | tr -d ' ')
            file_size=$(wc -c < ip.txt | tr -d ' ')
            echo "âœ… ip.txt: $ip_count ä¸ªIPv4åœ°å€, æ–‡ä»¶å¤§å°: $file_size å­—èŠ‚"
            echo "ip_count=$ip_count" >> $GITHUB_OUTPUT
            echo "ip_size=$file_size" >> $GITHUB_OUTPUT
            
            # æ˜¾ç¤ºå‰5ä¸ªIPä½œä¸ºæ ·æœ¬
            echo "ğŸ“„ IPv4æ ·æœ¬:"
            head -5 ip.txt | while read ip; do
              echo "  â€¢ $ip"
            done
          else
            echo "âŒ ip.txt æ–‡ä»¶ç¼ºå¤±æˆ–ä¸ºç©º"
            exit 1
          fi
          
          # æ£€æŸ¥IPv6æ–‡ä»¶
          if [ -f "ipv6.txt" ] && [ -s "ipv6.txt" ]; then
            ipv6_count=$(wc -l < ipv6.txt | tr -d ' ')
            file_size=$(wc -c < ipv6.txt | tr -d ' ')
            echo "âœ… ipv6.txt: $ipv6_count ä¸ªIPv6åœ°å€, æ–‡ä»¶å¤§å°: $file_size å­—èŠ‚"
            echo "ipv6_count=$ipv6_count" >> $GITHUB_OUTPUT
            echo "ipv6_size=$file_size" >> $GITHUB_OUTPUT
            
            # æ˜¾ç¤ºå‰3ä¸ªIPv6ä½œä¸ºæ ·æœ¬
            echo "ğŸ“„ IPv6æ ·æœ¬:"
            head -3 ipv6.txt | while read ip; do
              echo "  â€¢ $ip"
            done
          else
            echo "âŒ ipv6.txt æ–‡ä»¶ç¼ºå¤±æˆ–ä¸ºç©º"
            exit 1
          fi
          
          # æ£€æŸ¥éç¾å›½åŒºåŸŸIPæ–‡ä»¶
          echo "ğŸ” æ£€æŸ¥éç¾å›½åŒºåŸŸIPæ–‡ä»¶..."
          if [ -d "non_us_ips" ]; then
            non_us_files=$(find non_us_ips -name "non_us_ips_*.txt" -type f 2>/dev/null | wc -l)
            if [ "$non_us_files" -gt 0 ]; then
              latest_non_us=$(find non_us_ips -name "non_us_ips_*.txt" -type f | sort -r | head -1)
              non_us_count=$(wc -l < "$latest_non_us" 2>/dev/null | tr -d ' ' || echo "0")
              echo "âœ… éç¾å›½åŒºåŸŸIPæ–‡ä»¶: $non_us_files ä¸ªæ–‡ä»¶ï¼Œæœ€æ–°æ–‡ä»¶åŒ…å« $non_us_count è¡Œ"
              echo "non_us_files=$non_us_files" >> $GITHUB_OUTPUT
              echo "non_us_count=$non_us_count" >> $GITHUB_OUTPUT
              echo "latest_non_us=$latest_non_us" >> $GITHUB_OUTPUT
              
              # æ˜¾ç¤ºéç¾å›½åŒºåŸŸæ–‡ä»¶åˆ—è¡¨
              echo "ğŸ“ éç¾å›½åŒºåŸŸæ–‡ä»¶åˆ—è¡¨:"
              find non_us_ips -name "non_us_ips_*.txt" -type f | sort | while read file; do
                count=$(wc -l < "$file" 2>/dev/null | tr -d ' ' || echo "0")
                echo "  â€¢ $(basename "$file"): $count è¡Œ"
              done
            else
              echo "âš ï¸ æœªæ‰¾åˆ°éç¾å›½åŒºåŸŸIPæ–‡ä»¶"
              echo "non_us_files=0" >> $GITHUB_OUTPUT
              echo "non_us_count=0" >> $GITHUB_OUTPUT
            fi
          else
            echo "âš ï¸ non_us_ips ç›®å½•ä¸å­˜åœ¨"
            echo "non_us_files=0" >> $GITHUB_OUTPUT
            echo "non_us_count=0" >> $GITHUB_OUTPUT
          fi
          
          # æ£€æŸ¥æ—¥å¿—æ–‡ä»¶
          if [ -d "logs" ]; then
            log_count=$(find logs -name "*.log" -type f | wc -l)
            echo "ğŸ“Š æ—¥å¿—æ–‡ä»¶: $log_count ä¸ª"
          fi

      # ========== å˜æ›´æ£€æŸ¥ ==========
      - name: ğŸ“Š æ£€æŸ¥æ–‡ä»¶å˜æ›´
        id: changes-check
        run: |
          echo "ğŸ“Š æ£€æŸ¥æ–‡ä»¶å˜æ›´..."
          
          # é…ç½®Gitç”¨æˆ·ä¿¡æ¯ï¼ˆç”¨äºdiffï¼‰
          git config --local user.email "actions@github.com"
          git config --local user.name "GitHub Actions"
          
          # æ·»åŠ æ‰€æœ‰å¯èƒ½å˜æ›´çš„æ–‡ä»¶
          git add ip.txt ipv6.txt non_us_ips/ logs/ || true
          
          # æ£€æŸ¥æ˜¯å¦æœ‰æœªæäº¤çš„å˜æ›´
          if git diff --cached --quiet; then
            echo "ğŸ“­ æœªæ£€æµ‹åˆ°æ–‡ä»¶å˜æ›´"
            echo "has_changes=false" >> $GITHUB_OUTPUT
          else
            echo "ğŸ“¬ æ£€æµ‹åˆ°æ–‡ä»¶å˜æ›´"
            echo "has_changes=true" >> $GITHUB_OUTPUT
            echo "ğŸ“ å˜æ›´æ–‡ä»¶åˆ—è¡¨:"
            git diff --cached --name-only
            echo ""
            echo "ğŸ“‹ å˜æ›´è¯¦æƒ…:"
            git diff --cached --stat
          fi

      # ========== æäº¤å˜æ›´ ==========
      - name: ğŸ’¾ æäº¤å¹¶æ¨é€å˜æ›´
        id: auto-commit
        if: steps.changes-check.outputs.has_changes == 'true'
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: |
            chore: è‡ªåŠ¨æ›´æ–°IPåœ°å€åº“
            
            â€¢ è§¦å‘ç±»å‹: ${{ steps.debug.outputs.trigger_type }}
            â€¢ IPv4åœ°å€: ${{ steps.file-check.outputs.ip_count }} ä¸ª
            â€¢ IPv6åœ°å€: ${{ steps.file-check.outputs.ipv6_count }} ä¸ª
            â€¢ æ‰§è¡Œæ—¶é—´: ${{ steps.timestamp.outputs.time }}
            â€¢ è¿è¡ŒID: ${{ github.run_id }}
            
            [skip ci]
          commit_user_name: 'ğŸ¤– GitHub Actions Bot'
          commit_user_email: 'actions@users.noreply.github.com'
          commit_options: '--no-verify --signoff'
          file_pattern: |
            ip.txt
            ipv6.txt
            non_us_ips/**
            logs/**
          skip_fetch: false
          skip_checkout: false
          push_options: '--no-verify'

      # ========== å·¥ä½œæµæ€»ç»“ ==========
      - name: ğŸ“ˆ å·¥ä½œæµæ€»ç»“
        if: always()
        run: |
          echo "## ğŸ¯ IPåœ°å€æ”¶é›†æ€»ç»“" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          
          echo "### ğŸ“Š æ‰§è¡Œè¯¦æƒ…" >> $GITHUB_STEP_SUMMARY
          echo "- **è§¦å‘æ–¹å¼:** \`${{ github.event_name }}\`" >> $GITHUB_STEP_SUMMARY
          echo "- **è§¦å‘ç±»å‹:** ${{ steps.debug.outputs.trigger_type }}" >> $GITHUB_STEP_SUMMARY
          echo "- **æ‰§è¡Œæ—¶é—´:** ${{ steps.timestamp.outputs.time }}" >> $GITHUB_STEP_SUMMARY
          echo "- **è¿è¡Œæ—¶é•¿:** ${{ steps.ip-collection.outputs.duration || 'N/A' }} ç§’" >> $GITHUB_STEP_SUMMARY
          echo "- **ä»“åº“:** ${{ github.repository }}" >> $GITHUB_STEP_SUMMARY
          echo "- **åˆ†æ”¯:** \`${{ github.ref }}\`" >> $GITHUB_STEP_SUMMARY
          echo "- **è¿è¡ŒID:** \`${{ github.run_id }}\`" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          
          echo "### ğŸ“ æ–‡ä»¶çŠ¶æ€" >> $GITHUB_STEP_SUMMARY
          echo "- **IPv4åœ°å€æ•°é‡:** \`${{ steps.file-check.outputs.ip_count }}\` ä¸ª" >> $GITHUB_STEP_SUMMARY
          echo "- **IPv6åœ°å€æ•°é‡:** \`${{ steps.file-check.outputs.ipv6_count }}\` ä¸ª" >> $GITHUB_STEP_SUMMARY
          
          if [ "${{ steps.file-check.outputs.non_us_files }}" != "0" ]; then
            echo "- **éç¾å›½åŒºåŸŸIPæ–‡ä»¶:** \`${{ steps.file-check.outputs.non_us_files }}\` ä¸ªæ–‡ä»¶" >> $GITHUB_STEP_SUMMARY
            echo "- **æœ€æ–°éç¾å›½IPæ–‡ä»¶:** \`${{ steps.file-check.outputs.latest_non_us }}\`" >> $GITHUB_STEP_SUMMARY
          fi
          echo "" >> $GITHUB_STEP_SUMMARY
          
          if steps.changes-check.outputs.has_changes == 'true'; then
            echo "### âœ… å˜æ›´å·²æäº¤" >> $GITHUB_STEP_SUMMARY
            echo "IPåœ°å€æ–‡ä»¶å·²æ›´æ–°å¹¶è‡ªåŠ¨æäº¤åˆ°ä»“åº“ã€‚" >> $GITHUB_STEP_SUMMARY
            if [ "${{ steps.file-check.outputs.non_us_files }}" != "0" ]; then
              echo "ğŸŒ éç¾å›½åŒºåŸŸIPæ–‡ä»¶å·²ä¿å­˜åˆ° \`non_us_ips/\` ç›®å½•" >> $GITHUB_STEP_SUMMARY
            fi
          else
            echo "### ğŸ“­ æ— å˜æ›´" >> $GITHUB_STEP_SUMMARY
            echo "IPåœ°å€æ–‡ä»¶å·²æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œæ— éœ€æ›´æ–°ã€‚" >> $GITHUB_STEP_SUMMARY
          fi
          
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "### ğŸ”„ ä¸‹æ¬¡æ‰§è¡Œ" >> $GITHUB_STEP_SUMMARY
          echo "- æ•´ç‚¹ (00åˆ†) æˆ– 30åˆ†é’Ÿæ—¶è‡ªåŠ¨è¿è¡Œ" >> $GITHUB_STEP_SUMMARY
          echo "- æ‰‹åŠ¨è§¦å‘: åœ¨ Actions é¡µé¢ç‚¹å‡» \"Run workflow\"" >> $GITHUB_STEP_SUMMARY
          echo "- ä»£ç æ›´æ–°: ä¿®æ”¹å·¥ä½œæµæ–‡ä»¶æˆ–è„šæœ¬æ—¶è‡ªåŠ¨è¿è¡Œ" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          
          echo "---" >> $GITHUB_STEP_SUMMARY
          echo "*(ç”± ğŸ¤– GitHub Actions è‡ªåŠ¨ç”Ÿæˆ)*" >> $GITHUB_STEP_SUMMARY

      # ========== é€šçŸ¥ ==========
      - name: ğŸ‰ æˆåŠŸé€šçŸ¥
        if: success() && steps.changes-check.outputs.has_changes == 'true'
        run: |
          echo "ğŸ‰ æˆåŠŸæ›´æ–°IPåœ°å€åº“ï¼"
          echo "ğŸ“Š IPv4åœ°å€: ${{ steps.file-check.outputs.ip_count }} ä¸ª"
          echo "ğŸ“Š IPv6åœ°å€: ${{ steps.file-check.outputs.ipv6_count }} ä¸ª"
          echo "ğŸ”§ è§¦å‘ç±»å‹: ${{ steps.debug.outputs.trigger_type }}"
          echo "â±ï¸ æ‰§è¡Œæ—¶é—´: ${{ steps.ip-collection.outputs.duration }} ç§’"
          if [ "${{ steps.file-check.outputs.non_us_files }}" != "0" ]; then
            echo "ğŸŒ éç¾å›½åŒºåŸŸIP: ${{ steps.file-check.outputs.non_us_files }} ä¸ªæ–‡ä»¶å·²ä¿å­˜"
          fi
          echo "ğŸ“ å˜æ›´å·²è‡ªåŠ¨æäº¤åˆ°ä»“åº“"

      - name: â„¹ï¸ æ— å˜æ›´é€šçŸ¥
        if: success() && steps.changes-check.outputs.has_changes == 'false'
        run: |
          echo "â„¹ï¸ IPåœ°å€åº“å·²æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œæ— éœ€æ›´æ–°ã€‚"
          echo "ğŸ“Š å½“å‰IPv4: ${{ steps.file-check.outputs.ip_count }} ä¸ªåœ°å€"
          echo "ğŸ“Š å½“å‰IPv6: ${{ steps.file-check.outputs.ipv6_count }} ä¸ªåœ°å€"
          echo "ğŸ”§ è§¦å‘ç±»å‹: ${{ steps.debug.outputs.trigger_type }}"
          if [ "${{ steps.file-check.outputs.non_us_files }}" != "0" ]; then
            echo "ğŸ“ éç¾å›½åŒºåŸŸIPæ–‡ä»¶: ${{ steps.file-check.outputs.non_us_files }} ä¸ª"
          fi

      - name: âš ï¸ å¤±è´¥é€šçŸ¥
        if: failure()
        run: |
          echo "âŒ IPåœ°å€æ”¶é›†å¤±è´¥ï¼"
          echo "ğŸ”§ è§¦å‘ç±»å‹: ${{ steps.debug.outputs.trigger_type }}"
          echo "â° æ‰§è¡Œæ—¶é—´: ${{ steps.timestamp.outputs.time }}"
          echo "ğŸ“ è¯·æ£€æŸ¥æ—¥å¿—äº†è§£è¯¦ç»†é”™è¯¯ä¿¡æ¯"
          exit 1
